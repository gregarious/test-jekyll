<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>SAYOperation Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.2.1 (build 1333)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">SayKit </a></h1>
				<a id="developerHome" href="../index.html">Conversant Labs</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">SAYOperation Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/addObserver:">&nbsp;&nbsp;&nbsp;&nbsp;- addObserver:</option>
	
	<option value="//api/name/didCancel">&nbsp;&nbsp;&nbsp;&nbsp;- didCancel</option>
	
	<option value="//api/name/didFinish">&nbsp;&nbsp;&nbsp;&nbsp;- didFinish</option>
	
	<option value="//api/name/didResume">&nbsp;&nbsp;&nbsp;&nbsp;- didResume</option>
	
	<option value="//api/name/didSuspend">&nbsp;&nbsp;&nbsp;&nbsp;- didSuspend</option>
	
	<option value="//api/name/execute">&nbsp;&nbsp;&nbsp;&nbsp;- execute</option>
	
	<option value="//api/name/markFinished">&nbsp;&nbsp;&nbsp;&nbsp;- markFinished</option>
	
	<option value="//api/name/removeObserver:">&nbsp;&nbsp;&nbsp;&nbsp;- removeObserver:</option>
	
	<option value="//api/name/resume">&nbsp;&nbsp;&nbsp;&nbsp;- resume</option>
	
	<option value="//api/name/suspend">&nbsp;&nbsp;&nbsp;&nbsp;- suspend</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
</ul></li>









<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/addObserver:">addObserver:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/didCancel">didCancel</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/didFinish">didFinish</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/didResume">didResume</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/didSuspend">didSuspend</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/execute">execute</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/markFinished">markFinished</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/removeObserver:">removeObserver:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/resume">resume</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/suspend">suspend</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="SAYOperation Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">SAYOperation Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSOperation</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">SAYOperation.h</td>
</tr>
						</tbody></table></div>
					
                    
                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<ul>
<li><p>An NSOperation-subclass that adds a suspended state to the typical NSOperation KVO states.</p>

<p> A collaborator interested in the operation execution state should not need to observe KVO notifications. Instead, the collaborator should conform to <a href="../Protocols/SAYOperationObserver.html">SAYOperationObserver</a> and register itself with the operation.</p>

<p> In addition, SAYOperation was designed to abstract away the error-prone manual manipulation KVO state flags so that subclasses can be implemented with much less overhead. See &ldquo;Subclassing Notes&rdquo; for more details.</p>

<p> ## Suspension</p>

<p> SAYOperations support an additional boolean state flag, <a href="#//api/name/suspended"><code>isSuspended</code></a>. While this flag is modeled after the similar flags available in NSOperation, the NSOperationQueue knows nothing about it. Instead, the suspended state is a logical one in which subclasses can implement their own custom notion of suspended execution around. There is no requirement that prevents suspended operations from finishing without being resumed &ndash; this is completely up to subclasses to implement.</p>

<p> ## Subclassing Notes</p>

<p> Subclasses should be able to avoid any manual manipulation of conventional NSOperation KVO state management. Instead, this state management is handled by a combination of SAYOperation&rsquo;s implementation of <code>start</code> &amp; <code>cancel</code> methods and a special method defined to signal operation completion, <a href="#//api/name/markFinished"><code>markFinished</code></a>.</p>

<p> At the very least, most subclasses will only have two or three responsibilities:</p>

<pre><code> 1. Override `execute` to kick off the operation's actual work
 2. Call `markFinished` on itself when work has completed
 3. Override `didCancel` to wind down execution as soon as possible, if applicable
</code></pre>

<p> Additionally, subclasses may need to react to suspension, resumption, cancellation, and finish events. This logic is best inserted by overriding the following methods, which are hooks called in response to the appropriate events.</p>

<pre><code> - `didCancel`
 - `didSuspend`
 - `didResume`
 - `didFinish`
</code></pre></li>
</ul>
<div class="warning"><p><strong>Warning:</strong> Unlike typical NSOperations, SAYOperation subclasses should NEVER override <code>start</code> or <code>cancel</code>.</p></div><div class="warning"><p><strong>Warning:</strong> Setting <code>isFinished</code> to YES on a non-running, still queued operation will put the queue in an inconsistent state, which will often lead to a hard to track down runtime error. All subclasses should ensure they don&rsquo;t illegally call <a href="#//api/name/markFinished"><code>markFinished</code></a>, but just in case, SAYOperation will refuse to act on the <a href="#//api/name/markFinished"><code>markFinished</code></a> message for pending operations.</p>

<pre><code>## Cancellation

Note that cancellation is only to be used as a mechanism for queue management and operation lifecycle. A operation with "cancelled" status simply means that the operation has gotten word that it should finish up it's work as soon as possible. The operaton is not guaranteeing that all meaningful execution of the operation will cease at that instant. In fact, an operation can conceivably finish successfully even after being cancelled (see SAYSpeechOperation for an example of this).

Therefore, subclasses that want to differentiate between "completed" and "interrupted" finshed states should define custom properties to expose this status to collaborators. The collaborators should never look to `isCancelled` to get this kind of information.

Similarly, an operation should never have to send itself a `cancel` message. If it's operation has completed work but needs to report an error condition, it should set a custom property to signify the problem and then mark itself as finished.
</code></pre></div><div class="warning"><p><strong>Warning:</strong> It is still necessary for a subclass to call <a href="#//api/name/markFinished"><code>markFinished</code></a> on itself after cancellation.</p></div>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/suspend">&ndash;&nbsp;suspend</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/resume">&ndash;&nbsp;resume</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/addObserver:">&ndash;&nbsp;addObserver:</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/removeObserver:">&ndash;&nbsp;removeObserver:</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/markFinished">&ndash;&nbsp;markFinished</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/execute">&ndash;&nbsp;execute</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/didSuspend">&ndash;&nbsp;didSuspend</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/didResume">&ndash;&nbsp;didResume</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/didFinish">&ndash;&nbsp;didFinish</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/didCancel">&ndash;&nbsp;didCancel</a></code>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/addObserver:" title="addObserver:"></a>
	<h3 class="subsubtitle method-title">addObserver:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Add object as a subscriber to execution state changes on the receiver.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)addObserver:(id&lt;SAYOperationObserver&gt;)<em>observer</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>observer</em></dt>
			<dd><p>Agent to subscribe to operation state updates</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Add object as a subscriber to execution state changes on the receiver.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/didCancel" title="didCancel"></a>
	<h3 class="subsubtitle method-title">didCancel</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>Override point for acting after an operation enters the cancelled state.</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)didCancel</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<ul>
<li><p>Override point for acting after an operation enters the cancelled state.</p>

<p> Subclasses are discouraged from collaborating with classes unreleated to the core operation work here: in most cases using the observer protocol is a better choice. Observers will receive the operationDidCancel: message immediately after this is called.</p></li>
</ul>

	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/didFinish" title="didFinish"></a>
	<h3 class="subsubtitle method-title">didFinish</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>Override point for acting after an operation enters the finished state.</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)didFinish</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<ul>
<li><p>Override point for acting after an operation enters the finished state.</p>

<p> Subclasses are discouraged from collaborating with classes unreleated to the core operation work here: in most cases using the observer protocol is a better choice. Observers will receive the operationDidFinish: message immediately after this is called.</p></li>
</ul>

	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/didResume" title="didResume"></a>
	<h3 class="subsubtitle method-title">didResume</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>Override point for operation to <a href="#//api/name/resume">resume</a> work.</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)didResume</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<ul>
<li><p>Override point for operation to <a href="#//api/name/resume">resume</a> work.</p>

<p> Subclasses are discouraged from collaborating with classes unreleated to the core operation work here: in most cases using the observer protocol is a better choice. Observers will receive the operationDidResume: message immediately after this is called.</p></li>
</ul>

	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/didSuspend" title="didSuspend"></a>
	<h3 class="subsubtitle method-title">didSuspend</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>Override point for operation to <a href="#//api/name/suspend">suspend</a> work.</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)didSuspend</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<ul>
<li><p>Override point for operation to <a href="#//api/name/suspend">suspend</a> work.</p>

<p> Subclasses are discouraged from collaborating with classes unreleated to the core operation work here: in most cases using the observer protocol is a better choice. Observers will receive the operationDidSuspend: message immediately after this is called.</p></li>
</ul>

	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/execute" title="execute"></a>
	<h3 class="subsubtitle method-title">execute</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>Override point for starting actual operation work. Only called once, at the end of the <code>start</code> method.</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)execute</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<ul>
<li><p>Override point for starting actual operation work. Only called once, at the end of the <code>start</code> method.</p>

<p> Subclasses are discouraged from collaborating with classes unreleated to the core operation work here: in most cases using the observer protocol is a better choice. Observers will receive the operationDidStart: message immediately before this is called.</p>

<p>  @notice Subclasses should never override <code>start</code>. This method should be overwritten instead.</p></li>
</ul>

	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/markFinished" title="markFinished"></a>
	<h3 class="subsubtitle method-title">markFinished</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>Puts a started operation (i.e. executing or suspended) into a finished state. Once finished, an operation cannot change states.</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)markFinished</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<ul>
<li><p>Puts a started operation (i.e. executing or suspended) into a finished state. Once finished, an operation cannot change states.</p>

<p> Due to NSOperationQueue requirements, an operation must be started before it enters the finished state, or else an internal consistency runtime error may result. To avoid exceptions, this method will do nothing if it is called on a not yet started operation.</p>

<p> @notice Subclasses should not override this function</p></li>
</ul>

	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/removeObserver:" title="removeObserver:"></a>
	<h3 class="subsubtitle method-title">removeObserver:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Remove object as subscriber. Not typically necessary for memory management reasons, since the receiver&rsquo;s lifetime is typically limited.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)removeObserver:(id&lt;SAYOperationObserver&gt;)<em>observer</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>observer</em></dt>
			<dd><p>Agent to unsubscribe to operation state updates</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Remove object as subscriber. Not typically necessary for memory management reasons, since the receiver&rsquo;s lifetime is typically limited.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/resume" title="resume"></a>
	<h3 class="subsubtitle method-title">resume</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>Puts a suspended operation into an executing state. If the operation is not suspended, there will be no effect.</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)resume</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<ul>
<li><p>Puts a suspended operation into an executing state. If the operation is not suspended, there will be no effect.</p>

<p> @notice Subclasses should not override this method</p></li>
</ul>

	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/suspend" title="suspend"></a>
	<h3 class="subsubtitle method-title">suspend</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>Puts an executing operation in a suspended state. If the operation is not executing (i.e. it has not yet started, has finished, or is already suspended), there will be no effect.</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)suspend</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<ul>
<li><p>Puts an executing operation in a suspended state. If the operation is not executing (i.e. it has not yet started, has finished, or is already suspended), there will be no effect.</p>

<p> @notice Subclasses should not override this method</p></li>
</ul>

	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SAYOperation.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
                    
                    
                    
                    

				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2016 Conversant Labs. All rights reserved. (Last updated: 2016-01-25)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1333)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>